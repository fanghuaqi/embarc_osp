<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>embARC: Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 50px;">
  <td id="projectlogo"><img alt="Logo" src="embARC_Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectnumber">2017.12</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sect_example_how_to_use_embARC">How to Use embARC</a><ul><li class="level2"><a href="#sect_example_how_to_use_embARC_usage_notice">Prerequisites Before Using embARC</a></li>
<li class="level2"><a href="#sect_example_how_to_use_embARC_targets_in_make">Make Targets for embARC</a></li>
<li class="level2"><a href="#sect_example_how_to_use_embARC_make_options">Make Options for embARC</a><ul><li class="level3"><a href="#subsect_example_how_to_use_embARC_make_options_cmd">Options to Set Using the make Command</a></li>
<li class="level3"><a href="#subsect_example_how_to_use_embARC_make_options_makefile">Options to Hard-Code in the Application Makefile</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#sect_example_build_an_application_in_embARC">Building an Application in embARC</a></li>
<li class="level1"><a href="#sect_example_overview_of_provided_embARC_examples">Overview of embARC Examples</a></li>
<li class="level1"><a href="#sect_example_division_of_provided_embARC_examples">Division of embARC Examples</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="sect_example_how_to_use_embARC"></a>
How to Use embARC</h1>
<h2><a class="anchor" id="sect_example_how_to_use_embARC_usage_notice"></a>
Prerequisites Before Using embARC</h2>
<p>Before working with embARC, review the following prerequisites:</p>
<ul>
<li>Make sure to check whether the path of <a class="el" href="page_example_usage.html#EMBARC_DEVELOPMENT_REQUIREMENT">All the Required Tools(updated)</a> for the MetaWare and ARC GNU tool chains is added to the system variable <b>PATH</b> in your environment variables.</li>
<li>Download extra third-party source code and apply embARC patches; for details see <a class="el" href="page_example_usage.html#EMBARC_APPLY_PATCHES">Download Extra Source Code and Apply Required Patches</a>.</li>
<li>Use <b>gmake</b> with the MetaWare toolchain and <b>make</b> with the ARC GNU toolchain.</li>
<li>The embARC software build system is purely makefile-based. Developers need to provide makefiles for new embARC applications. The makefile template can be found at <b>&lt;embARC&gt;/example/example.makefile</b>.</li>
<li>Go to <a class="el" href="page_example_usage.html">Example Usage Guide</a> for more details. <a class="anchor" id="EMBARC_ARCGNU_OPENOCD_PATHSET"></a></li>
<li>Using the ARC GNU toolchain<ul>
<li>If running and debugging embARC applications using arc-elf32-gdb and OpenOCD, check whether the path of openocd is added to the <b>PATH</b> in your environment variables and modify the <b>OPENOCD_SCRIPT_ROOT</b> variable in <b>&lt;embARC&gt;/options/toolchain/toolchain_gnu.mk</b> according to your OpenOCD root path.</li>
<li>If running GNU program with using the GNU toolchain on Linux, modify the OpenOCD configuration file as Linux format with LF line terminators. <b>dos2unix</b> can be used to convert it.</li>
<li>If using the embARC pre-installed GNU IDE projects on Windows, installing the GNU IDE in the default location is recommended. If using the embARC pre-installed GNU IDE projects on Linux, or installing the GNU IDE in non-default locations on Windows, it is necessary to change the OpenOCD executable path and OpenOCD configuration file path in the tab of <b>Debugger-&gt;Gdbserver Settings</b> manually for the debug configuration.</li>
</ul>
</li>
<li>Using Ashling Opella-XD debugger<ul>
<li>If you want to use Ashling Opella-XD debugger, you need to set <b>JTAG</b> to <em>opella</em>, and check where the driver for this JTAG located.</li>
<li>You need to check and change all the <b>ASH_PATH</b> defined in <b>options/scripts.mk</b> according to where you install the driver to and the OS environment you use.</li>
<li>Only supported by Metaware.</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>See <a class="el" href="page_example_usage.html#EMBARC_KNOWN_ISSUES">FAQS</a> and check <a href="https://embarc.org/">embARC website</a> and <a href="https://forums.embarc.org/">embARC Forum</a> for the latest information on known issues. If you find any issues to report, post a new discussion item in <a href="https://forums.embarc.org/">embARC Forum</a>. </dd>
<dd>
<b>&lt;embARC&gt;</b> represents the location where you put the embARC source code, such as <b>C:/embARC</b>.</dd></dl>
<h2><a class="anchor" id="sect_example_how_to_use_embARC_targets_in_make"></a>
Make Targets for embARC</h2>
<p>There are several targets to make and run embARC examples on the command line. These make targets are defined in <b>options/rules.mk</b>, and an overview is provided below. All the commands below use the default make options provided in the embARC application makefile.</p>
<ul>
<li><b>make help</b>: Show help document about how to use make in embARC.</li>
<li><b>make all</b>: Compile and link the target program.</li>
<li><b>make build</b>: Clean current configuration object files and rebuild configuration.</li>
<li><b>make run</b>: Compile and link the target program. For the MetaWare toolchain, call the MetaWare debugger (mdb) to load the target program onto EMSK. For the ARC GNU toolchain, call arc-elf32-gdb and OpenOCD to load the target program onto EMSK.</li>
<li><b>make gui</b>: Compile and link the target program. Launch the MetaWare debugger (MDB) in GUI mode for the MetaWare toolchain or arc-elf32-gdb in command-line mode for the ARC GNU toolchain to debug the target program.</li>
<li><b>make clean</b>: Clean object files for current build configuration.</li>
<li><b>make boardclean</b>: Clean all object files for currently selected board.</li>
<li><b>make distclean</b>: Clean all object files for different configurations.</li>
<li><b>make cfg</b>: Print current configurations of embARC.</li>
<li><b>make opt</b>: Print detailed configuration properties of embARC.</li>
</ul>
<p>See <a class="el" href="page_example_usage.html#sect_example_usage_GeneralBuildSteps">General Build and Run Steps</a> for more details.</p>
<dl class="section note"><dt>Note</dt><dd>For example, if you are running <b>&lt;embARC&gt;/example/baremetal/bootloader</b> with <b>make run</b> command on the command line, the default <a class="el" href="page_example.html#sect_example_how_to_use_embARC_make_options">Make Options</a> are enabled in the embARC application makefile. Run the <b>make cfg</b> command to see the default configuration for this application.</dd></dl>
<h2><a class="anchor" id="sect_example_how_to_use_embARC_make_options"></a>
Make Options for embARC</h2>
<ul>
<li>The make options are defined for using embARC flexibly. They can be set through make command or hard-coded in the application makefile.</li>
<li>Most options are located in <b>&lt;embARC&gt;/options/options.mk</b>. If you change an option value in <b>&lt;embARC&gt;/options/options.mk</b>, it will affect all the applications to some extent. You can set the value of the options in your own application makefile for the specified application.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>It is better to set <b>BOARD</b>, <b>BD_VER</b>, <b>CUR_CORE</b>, and <b>TOOLCHAIN</b> in the make command, such as <em>make BOARD=emsk BD_VER=22 CUR_CORE=arcem7d TOOLCHAIN=gnu</em>. It is better to hard-code other make options in the application makefile.</dd></dl>
<h3><a class="anchor" id="subsect_example_how_to_use_embARC_make_options_cmd"></a>
Options to Set Using the make Command</h3>
<ul>
<li><b>BOARD</b>: Select the target board.<ul>
<li>The default value of this option is defined in <b>board/board.mk</b>.</li>
<li>Optional values as below, default value is <em>emsk</em>. <table class="doxtable">
<tr>
<th>BOARD </th><th>Description  </th></tr>
<tr>
<td>emsk </td><td><a class="el" href="page_board_emsk.html">EM Starter Kit</a> </td></tr>
<tr>
<td>axs </td><td><a class="el" href="page_board_axs.html">AXS Board</a> </td></tr>
<tr>
<td>nsim </td><td><a class="el" href="page_board_nsim.html">Virtual Board based on nSIM</a> </td></tr>
<tr>
<td>hsdk </td><td><a class="el" href="page_board_hsdk.html">ARC HS Development Kit</a> </td></tr>
</table>
</li>
<li>For example, <em>make BOARD=emsk</em> selects the EMSK board as the target board.</li>
</ul>
</li>
<li><b>BD_VER</b>: Select the board version.<ul>
<li>The default value of this option is defined in one of the following makefiles according to your <b>BOARD</b> option. <table class="doxtable">
<tr>
<th>BOARD </th><th>Location of the definition of BD_VER  </th></tr>
<tr>
<td>emsk </td><td>board/emsk/emsk.mk </td></tr>
<tr>
<td>axs </td><td>board/axs/axs.mk </td></tr>
<tr>
<td>nsim </td><td>board/nsim/nsim.mk </td></tr>
<tr>
<td>hsdk </td><td>board/hsdk/hsdk.mk </td></tr>
</table>
</li>
<li>For the <em>emsk</em> board, three versions are supported in embARC: 1.1, 2.2, and 2.3. The optional values of <em>BD_VER</em> are <em>11</em>, <em>22</em> and <em>23</em>. The <em>BD_VER</em> must match the target EMSK version. For example, programs built for 1.1 cannot run on an EMSK 2.x board. The default value of <em>BD_VER</em> for the <em>emsk</em> board is <em>22</em>.<ul>
<li>For EMSK 2.0, 2.1 and 2.2, you can upgrade the firmware version to 2.3, and for EMSK 1.0, you can upgrade the firmware version to 1.1.</li>
</ul>
</li>
<li>For the <em>axs</em> board, one version is supported: 103. The optional value of <em>BD_VER</em> is <em>103</em>. The default value of <em>BD_VER</em> for the <em>axs</em> board is <em>103</em>.</li>
<li>For the <em>nsim</em> board, two versions are supported: 10, 1506. The optional value of <em>BD_VER</em> is <em>1506</em> and <em>10</em>. The default value of <em>BD_VER</em> for the <em>nsim</em> board is <em>1506</em>.</li>
<li>For the <em>hsdk</em> board, one version is supported: 10. The optional value of <em>BD_VER</em> is <em>10</em>. The default value of <em>BD_VER</em> for the <em>hsdk</em> board is <em>10</em>.</li>
<li>For example, <em>make BOARD=emsk BD_VER=22</em> selects <em>2.2</em> as the EMSK target board version.</li>
</ul>
</li>
<li><b>CUR_CORE</b>: Select the core configuration for the specified board version.<ul>
<li>For <em>emsk - 11</em>, the default value of this option is defined in <b>board/emsk/configs/11/core_config.mk</b>.</li>
<li>Optional values for <em>emsk - 11</em>; default value is <em>arcem6</em>. <table class="doxtable">
<tr>
<th>CUR_CORE </th><th>Description  </th></tr>
<tr>
<td>arcem4 </td><td>ARC EM4 core </td></tr>
<tr>
<td>arcem4cr16 </td><td>ARC EM4CR16 core </td></tr>
<tr>
<td>arcem6 </td><td>ARC EM6 core </td></tr>
<tr>
<td>arcem6gp </td><td>ARC EM6GP core </td></tr>
</table>
</li>
<li>For <em>emsk - 22</em>, the default value of this option is defined in <b>board/emsk/configs/22/core_config.mk</b>.</li>
<li>For <em>emsk - 23</em>, the default value of this option is defined in <b>board/emsk/configs/23/core_config.mk</b>.</li>
<li>Optional values for <em>emsk - 22/23</em>; default value is <em>arcem7d</em>. <table class="doxtable">
<tr>
<th>CUR_CORE </th><th>Description  </th></tr>
<tr>
<td>arcem7d </td><td>ARC EM7D core </td></tr>
<tr>
<td>arcem9d </td><td>ARC EM9D core </td></tr>
<tr>
<td>arcem11d </td><td>ARC EM11D core </td></tr>
</table>
</li>
<li>For <em>axs - 103</em>, the default value of this option is defined in <b>board/axs/configs/103/core_config.mk</b>.</li>
<li>Optional values for <em>axs - 103</em>; default value is <em>archs36</em>. <table class="doxtable">
<tr>
<th>CUR_CORE </th><th>Description  </th></tr>
<tr>
<td>archs36 </td><td>ARC HS36 core </td></tr>
</table>
</li>
<li>For <em>nsim - 1506</em>, the default value of this option is defined in <b>board/nsim/configs/1506/core_config.mk</b>.</li>
<li>Optional values for <em>nsim - 1506</em>; default value is <em>arcemfull</em>. <table class="doxtable">
<tr>
<th>CUR_CORE </th><th>Description  </th></tr>
<tr>
<td>arcemfull </td><td>ARC EM core with full features </td></tr>
<tr>
<td>archs </td><td>ARC HS core </td></tr>
<tr>
<td>arcemsecureshield </td><td>ARC EM core with secure feature </td></tr>
</table>
</li>
<li>For <em>nsim - 10</em>, the default value of this option is defined in <b>board/nsim/configs/10/core_config.mk</b>.</li>
<li>Optional values for <em>nsim - 10</em>; default value is <em>arcem</em>. <table class="doxtable">
<tr>
<th>CUR_CORE </th><th>Description  </th></tr>
<tr>
<td>arcem </td><td>ARC EM core </td></tr>
<tr>
<td>archs </td><td>ARC HS core </td></tr>
</table>
</li>
<li>For <em>hsdk</em>, the default value of this option is defined in <b>board/hsdk/configs/10/core_config.mk</b>.</li>
<li>Optional values for <em>hsdk</em>; default value is <em>archs38_c0</em>. <table class="doxtable">
<tr>
<th>CUR_CORE </th><th>Description  </th></tr>
<tr>
<td>archs38_c0 </td><td>ARC HS38x4 core 0 </td></tr>
<tr>
<td>archs38_c1 </td><td>ARC HS38x4 core 1 </td></tr>
<tr>
<td>archs38_c2 </td><td>ARC HS38x4 core 2 </td></tr>
<tr>
<td>archs38_c3 </td><td>ARC HS38x4 core 3 </td></tr>
</table>
</li>
<li>For example, <em>make BOARD=emsk BD_VER=23 CUR_CORE=arcem11d</em> selects the <em>arcem11d</em> core configuration for emsk 2.3.</li>
</ul>
</li>
<li><b>TCF</b>: Select the tool configuration file(tcf).<ul>
<li>Through this option, you can choose the tcf file you provided by this option for specified board and core configuration.</li>
<li>The the tcf file you provided by this option must use absolute file path or relative file path(relative to where your application makefile located).</li>
<li>Currently, this option is not supported in nsim-1506 board, but supported in other boards.</li>
<li>For example, when the current board and core is emsk 2.3 arcem7d, then you can pass your own tcf file to replace the default. eg. There is arcem.tcf file in the folder where application's makefile located, you can run <b>gmake BD_VER=23 CUR_CORE=arcem7d TCF=arcem.tcf</b> to do this.</li>
<li>When you specify you own tcf file, you need to clean the project first before build it.</li>
</ul>
</li>
<li><b>TOOLCHAIN</b>: Select the toolchain to compile the embARC software.<ul>
<li>The default value of this option is defined in <b>options/options.mk</b>.</li>
<li>Optional values below; default value is <em>mw</em>. <table class="doxtable">
<tr>
<th>TOOLCHAIN </th><th>Description  </th></tr>
<tr>
<td>mw </td><td>MetaWare Development Toolkit </td></tr>
<tr>
<td>gnu </td><td>ARC GNU Development Toolset </td></tr>
</table>
</li>
<li>For example, <em>make BOARD=emsk BD_VER=23 CUR_CORE=arcem11d TOOLCHAIN=gnu</em> selects the ARC GNU toolset to compile embARC applications for emsk 2.3 arcem11d.</li>
</ul>
</li>
<li><b>DIG_NAME</b>: Specify the Digilent USB JTAG name.<ul>
<li>The default value of this option is defined in <b>options/options.mk</b>.</li>
<li>This option's default value is empty. It is not necessary to set it when just one JTAG is connected to your PC. It is useful if more than one EMSK JTAG cable is connected to your PC, for example, to debug two EMSK boards using one PC. See <a class="el" href="page_example_usage.html#sect_example_usage_HowToDebugMultiBoards">How to Debug Multiple Boards in embARC</a> for details.</li>
<li>This option is only available when the MetaWare toolkit is selected. This option is a simple wrapper of the <b>-prop=dig_device=name</b> option of the MetaWare debugger (mdb). See the MetaWare Debugger User's Guide for details.</li>
</ul>
</li>
<li><b>V</b>: Control whether to show verbose compiling information.<ul>
<li>The default value of this option is defined in <b>options/options.mk</b>.</li>
<li>This option is rarely used, and its default is <em>0</em>.</li>
<li><em>0</em> means just show basic compiling information; <em>1</em> means show verbose information.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="subsect_example_how_to_use_embARC_make_options_makefile"></a>
Options to Hard-Code in the Application Makefile</h3>
<ul>
<li><b>OLEVEL</b>: Select the compiler optimization level. Possible choices are <em>O, O0, O1, O2, O3, Os, Os1, Oz, Ofast, Og</em>, or you can leave the OLEVEL blank to not select any optimization, like <b>OLEVEL= </b>.<ul>
<li>The default value of this option is defined in <b>options/options.mk</b>.</li>
<li>For example, <em>make BOARD=emsk BD_VER=22 CUR_CORE=arcem11d TOOLCHAIN=gnu OLEVEL=O2</em> selects optimization level O2 of the ARC GNU toolchain to compile embARC applications for EMSK 2.2 and arcem11d.</li>
</ul>
</li>
<li><b>JTAG</b>: Select the JTAG probe to load and debug the target program.<ul>
<li>The default value of this option is defined in <b>options/options.mk</b>.</li>
<li>Optional values below; the default value is <em>usb</em>. <table class="doxtable">
<tr>
<th>JTAG </th><th>Description  </th></tr>
<tr>
<td>usb </td><td>Digilent USB JTAG cable </td></tr>
<tr>
<td>opella </td><td>Ashling Opella-XD JTAG probe </td></tr>
</table>
</li>
<li>For example, <em>make BOARD=emsk BD_VER=22 CUR_CORE=arcem11d OLEVEL=O2 TOOLCHAIN=gnu run</em> selects the ARC GNU toolchain to compile embARC applications with optimization level O2 for EMSK 2.2 arcem11d, and load the applications using Digilent USB JTAG.</li>
<li><em>opella</em> is only supported for the MetaWare Development Toolkit.</li>
</ul>
</li>
<li><b>OS_SEL</b>: Select operating system.<ul>
<li>This option should be defined in your application makefile.</li>
<li>Set this option in the makefiles of the examples if OS services are required.</li>
<li>Optional operating system values are shown below. <table class="doxtable">
<tr>
<th>OS_SEL </th><th>Description  </th></tr>
<tr>
<td>freertos </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p_s___o_s___f_r_e_e_r_t_o_s.html">FreeRTOS Runtime</a> </td></tr>
</table>
</li>
<li>If you leave the <em>OS_SEL</em> value blank, such as <b>OS_SEL= </b>, no OS services are selected; just use <a class="el" href="group___e_m_b_a_r_c___a_p_p_s___b_a_r_e_m_e_t_a_l.html">Bare-Metal Run Time</a>.</li>
<li>For developing different run-time applications with embARC, it is helpful to review the examples in <em>&lt;embARC&gt;/example</em>.</li>
</ul>
</li>
<li><b>MID_SEL</b>: Select middleware to be used in embARC application.<ul>
<li>This option should be defined in your application makefile.</li>
<li>All available middleware is located in <em>&lt;embARC&gt;/middleware</em>.</li>
<li><a class="el" href="page_middleware.html#sect_mid_middleware_list">Available list of middleware of embARC</a></li>
<li>It is recommended to include <a class="el" href="page_middleware_general_middleware.html#sect_middleware_general_middleware_common">common</a> middleware to provide basic printf() functionality using xprintf().</li>
</ul>
</li>
<li><b>LIB_SEL</b>: Select libraries to be used in the embARC application.<ul>
<li>This option should be defined in your application makefile.</li>
<li>All available libraries are located in <em>&lt;embARC&gt;/library</em>.</li>
<li><em>clib</em> is the default.</li>
<li>Optional library values are shown below. <table class="doxtable">
<tr>
<th>LIB_SEL </th><th>Description  </th></tr>
<tr>
<td>clib </td><td><a class="el" href="page_library.html#sect_lib_clib">C Library Support</a> </td></tr>
<tr>
<td>secureshield </td><td><a class="el" href="page_library.html#sect_lib_secureshield">SecureShield Library</a> </td></tr>
</table>
</li>
</ul>
</li>
<li><b>APPL_LIBS</b>: Set extra required application libraries to be linked.<ul>
<li>This option should be defined in your application makefile.</li>
<li>This <em>APP_LIBS</em> option collects extra linker option to include extra libraries to be linked.</li>
<li>For example, <em>APPL_LIBS = -lm</em> means linking math library to target program, "-lm" only support GNU toolchain</li>
</ul>
</li>
<li><b>HEAPSZ</b>: Set application heap size in bytes.<ul>
<li>This option should be defined in your application makefile.</li>
<li>The default value of this option is defined in <b>options/options.mk</b>.</li>
<li>The default value is 8192, which means the heap size of the application is set to 8192 bytes by default.</li>
<li>For baremetal and Contiki applications, this <em>HEAPSZ</em> configuration is useful.</li>
<li>For FreeRTOS applications, you can define the RTOS heap size by setting <em>configTOTAL_HEAP_SIZE</em> in FreeRTOSConfig.h.</li>
</ul>
</li>
<li><b>STACKSZ</b>: Set application stack size in bytes.<ul>
<li>This option should be defined in your application makefile.</li>
<li>The default value of this option is defined in <b>options/options.mk</b>.</li>
<li>The default value is 8192, which means the stack size of the application is set to 8192 bytes by default.</li>
<li>For baremetal and Contiki applications, this <em>STACKSZ</em> configuration is useful.</li>
<li>For FreeRTOS applications, you can define the minimum RTOS task stack size by setting <em>configMINIMAL_STACK_SIZE</em> in FreeRTOSConfig.h, and define each task's stack size in the application source code.</li>
</ul>
</li>
<li><b>USE_BOARD_MAIN</b>: Control which board init process is used.<ul>
<li>The default value of this option is defined in <b>board/board.mk</b>.</li>
<li>Default value is 1; set in <em>&lt;embARC&gt;/board/board.mk</em>.</li>
<li>When this option is 0, it uses the normal board init process, compatible with previous embARC releases; you must do board_init yourself.</li>
<li>When this option is 1, embARC initializes fatfs, ntshell, and lwip with WiFi and creates a FreeRTOS task for <a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___a_r_c___f_e_a_t_u_r_e___t_i_m_e_r___i_n_t_e_r_r_u_p_t.html#ga840291bc02cba5474a4cb46a9b9566fe" title="main entry for testing arc fiq interrupt ">main()</a>. You only need to write applications or create new tasks in the <a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___a_r_c___f_e_a_t_u_r_e___t_i_m_e_r___i_n_t_e_r_r_u_p_t.html#ga840291bc02cba5474a4cb46a9b9566fe" title="main entry for testing arc fiq interrupt ">main()</a> function. When ntshell is enabled, the <a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___a_r_c___f_e_a_t_u_r_e___t_i_m_e_r___i_n_t_e_r_r_u_p_t.html#ga840291bc02cba5474a4cb46a9b9566fe" title="main entry for testing arc fiq interrupt ">main()</a> function needs to be triggered by the ntshell <em>main</em> command.</li>
<li>For more details about how this new process is implemented, see <em>&lt;embARC&gt;/board/board.c</em>.</li>
<li>In most cases, you don't need to change this value to <em>0</em>.</li>
</ul>
</li>
<li><b>EXT_DEV_LIST</b>: Select peripheral device drivers used in example.<ul>
<li>Use it in the example's makefile, like this <code>EXT_DEV_LIST += sensor/temperature/adt7420</code></li>
<li>Optional values for <em>EXT_DEV_LIST</em> can be found in <em>device/peripheral</em>.</li>
<li>Select the peripheral device drivers relative path you want to use, and add to <code>EXT_DEV_LIST</code>.</li>
<li>If more than one peripheral device drivers are selected, please use space between each other, such as <code>EXT_DEV_LIST += wifi/mrf24g sensor/temperature/adt7420</code></li>
<li>Some onboard peripheral device drivers are already selected according to the board you use, you can check it in board makefile.</li>
<li><em>WIFI_SEL</em> is not available now, if you want to choose different WiFi, you need to change the <code>EXT_DEV_LIST</code> in your example makefile.</li>
</ul>
</li>
<li><b>EMBARC_ROOT</b>: Set embARC source-code root directory path.<ul>
<li>This option should be defined in your application makefile.</li>
<li>This option specifies the path of the embARC source-code root.</li>
<li>The path can be relative or absolute.</li>
</ul>
</li>
<li>embARC application related options<ul>
<li>These options should be defined in your application makefile.</li>
<li><b>APPL</b>: Set embARC application name.</li>
<li><b>APPL_CSRC_DIR</b>: Set the path of application C source-code directories used.<ul>
<li>All used c source-code directory paths including subfolders need to be added.</li>
<li>C source-code files should be suffixed with <em>c</em> or <em>C</em>, such as <em>*.c or *.C</em>.</li>
<li>The paths are separated by whitespace.</li>
</ul>
</li>
<li><b>APPL_ASMSRC_DIR</b>: Set the path of application assembly source-code directories used.<ul>
<li>All used assembly source-code directory paths including subfolders need to be added.</li>
<li>Assembly source-code files should be suffixed with <em>s</em> or <em>S</em>, such as <em>*.s or *.S</em>.</li>
<li>The paths are separated by whitespace.</li>
</ul>
</li>
<li><b>APPL_INC_DIR</b>: Set the path of application include-file directories used.<ul>
<li>All used include-file directory paths including subfolders need to be added.</li>
<li>The paths are separated by whitespace.</li>
</ul>
</li>
<li><b>APPL_DEFINES</b>: Set extra macros defined from makefile for this application.<ul>
<li>The macro definitions are separated by whitespace.</li>
<li>For example, if you want to define <em>USE_EMBARC=1</em>, then you should set the value to <em>-DUSE_EMBARC=1</em>.</li>
</ul>
</li>
<li>Additional compiler, assembler, and linker options.<ul>
<li><b>ADT_COPT</b>: Additional compiler options; see the compiler manual for help.</li>
<li><b>ADT_AOPT</b>: Additional assembler options; see the assembler manual for help.</li>
<li><b>ADT_LOPT</b>: Additional linker options; see the linker manual for help.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="sect_example_build_an_application_in_embARC"></a>
Building an Application in embARC</h1>
<p>We provided some examples and applications in embARC, user can take reference from them.</p>
<ul>
<li>Access to the examples: <a href="https://github.com/foss-for-synopsys-dwc-arc-processors/embarc_osp/tree/master/example">source code of embARC examples</a></li>
<li>Access to the applications: <a href="https://github.com/foss-for-synopsys-dwc-arc-processors/embarc_applications">source code of embARC applications</a></li>
</ul>
<p>Studying the provided example makefiles which cover all the components is a recommended way to build your application in embARC.</p>
<ul>
<li><a href="https://forums.embarc.org/"><b>embARC Forums</b></a></li>
<li><a class="el" href="page_example_usage.html">embARC Example Usage</a></li>
<li><a class="el" href="page_example_compatibility_matrix.html">Compatibility Matrix for embARC Examples</a></li>
</ul>
<p>Project templates are also provided: <b>example.makefile</b> for makefile, <b>main.c.tmpl</b> for main.c. The steps to build your embARC application are:</p>
<ul>
<li>Create your application directory, copy the <b>example.makfile</b> in, and rename it to <b>makefile</b>.</li>
<li>Set the parameters in the makefile, such as application name (APPL) and board-related parameters. <b>EMBARC_ROOT</b> is the relative path to the root of the embARC software.</li>
<li>Select the required middleware (MID_SEL) and OS (OS_SEL).</li>
<li>Set the source code (src) directory (APPL_CSRC_DIR for C files and APPL_ASMSRC_DIR for assembly (.s/.S)). The build system automatically collects the source files in the specified directories.</li>
<li>Write application code. For bare metal, the <b><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___a_r_c___f_e_a_t_u_r_e___t_i_m_e_r___i_n_t_e_r_r_u_p_t.html#ga840291bc02cba5474a4cb46a9b9566fe" title="main entry for testing arc fiq interrupt ">main()</a></b> function is the application entry, and some initialization must be done at the beginning of <b><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___a_r_c___f_e_a_t_u_r_e___t_i_m_e_r___i_n_t_e_r_r_u_p_t.html#ga840291bc02cba5474a4cb46a9b9566fe" title="main entry for testing arc fiq interrupt ">main()</a></b>. For OS-based applications, see the provided OS-based examples.</li>
<li>Build application code. See <a class="el" href="page_example_usage.html">embARC Example Usage</a> for detailed usage information.</li>
</ul>
<h1><a class="anchor" id="sect_example_overview_of_provided_embARC_examples"></a>
Overview of embARC Examples</h1>
<p>The embARC platform comes with a large range of examples using the various OS, middleware and peripherals supported in embARC.<br/>
These examples provide a useful reference and starting point for embARC developers for their own applications. <br/>
The .elf files of the following examples can be loaded through JTAG, or the .bin files through SD card by secondary bootloader .</p>
<p>Please visit <a class="el" href="group___e_m_b_a_r_c___a_p_p_s.html">embARC Examples</a>, <a href="https://github.com/foss-for-synopsys-dwc-arc-processors/embarc_applications"><b>embARC Applications</b></a> and <a class="el" href="page_example_usage.html#EMBARC_APPS_USERGUIDE">Example Usage Guide</a> for detailed usage information.</p>
<p><a class="anchor" id="EMBARC_EXAMPLE_DOCUMENTTABLE"></a></p>
<ul>
<li><b>Here is the list of embARC examples</b>, located in <em>&lt;embARC&gt;/example</em>. <table class="doxtable">
<tr>
<th>Example Name </th><th>Example Directory </th><th>Example Document Link  </th></tr>
<tr>
<td>baremetal_arc_feature_cache </td><td>baremetal/arc_feature/cache </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___a_r_c___f_e_a_t_u_r_e___c_a_c_h_e.html">embARC Cache Example</a> </td></tr>
<tr>
<td>baremetal_arc_feature_timer_interrupt </td><td>baremetal/arc_feature/timer_interrupt </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___a_r_c___f_e_a_t_u_r_e___t_i_m_e_r___i_n_t_e_r_r_u_p_t.html">embARC ARC Timer and Interrupt Example</a> </td></tr>
<tr>
<td>baremetal_arc_feature_udma </td><td>baremetal/arc_feature/udma </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___a_r_c___f_e_a_t_u_r_e___u_d_m_a.html">embARC ARC uDMA Example</a> </td></tr>
<tr>
<td>baremetal_ble_hm1x </td><td>baremetal/ble_hm1x </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___b_l_e___h_m1_x.html">embARC BLE_HM1X Example</a> </td></tr>
<tr>
<td>baremetal_blinky </td><td>baremetal/blinky </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___b_l_i_n_k_y.html">embARC Blinky Example</a> </td></tr>
<tr>
<td>baremetal_axs103 </td><td>baremetal/axs103 </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___a_r_c___f_e_a_t_u_r_e___a_x_s103.html">embARC AXS 103 board test Example</a> </td></tr>
<tr>
<td>baremetal_bootloader </td><td>baremetal/bootloader </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___b_o_o_t_l_o_a_d_e_r.html">embARC Secondary Bootloader Example</a> </td></tr>
<tr>
<td>baremetal_cxx </td><td>baremetal/cxx </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___c_x_x.html">embARC C++ Support Test Example</a> </td></tr>
<tr>
<td>baremetal_dma_spiflash </td><td>baremetal/dma_spiflash </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___d_m_a___s_p_i_f_l_a_s_h.html">embARC SPIFlash with uDMA Test Example</a> </td></tr>
<tr>
<td>baremetal_graphic_u8glib </td><td>baremetal/graphic_u8glib </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___g_r_a_p_h_i_c___u8_g_l_i_b.html">embARC Graphic Example on SSD1306</a> </td></tr>
<tr>
<td>baremetal_openthread_cli </td><td>baremetal/openthread/cli </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___o_p_e_n_t_h_r_e_a_d___c_l_i.html">embARC OpenThread CLI example on MRF24J40</a> </td></tr>
<tr>
<td>baremetal_openthread_ncp </td><td>baremetal/openthread/ncp </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___o_p_e_n_t_h_r_e_a_d___n_c_p.html">embARC OpenThread NCP example on MRF24J40</a> </td></tr>
<tr>
<td>baremetal_secureshield_secret_secure </td><td>baremetal/secureshield/secret_secure </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___s_e_c_u_r_e_s_h_i_e_l_d___s_e_c_r_e_t___s_e_c_u_r_e.html">embARC SecureShield Secret Secure Example</a> </td></tr>
<tr>
<td>baremetal_secureshield_secret_normal </td><td>baremetal/secureshield/secret_normal </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___s_e_c_u_r_e_s_h_i_e_l_d___s_e_c_r_e_t___n_o_r_m_a_l.html">embARC Secureshield Secret Normal Example</a> </td></tr>
<tr>
<td>baremetal_secureshield_secret_secure_sid </td><td>baremetal/secureshield/secret_secure_sid </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___b_a_r_e_m_e_t_a_l___s_e_c_u_r_e_s_h_i_e_l_d___s_e_c_r_e_t___s_e_c_u_r_e___s_i_d.html">embARC Secureshield Secret with SID Example</a> </td></tr>
<tr>
<td>baremetal_secureshield_test_case </td><td>baremetal/secureshield/test_case </td><td>EMBARC_APP_BAREMETAL_SECURESHIELD_TEST_CASE </td></tr>
<tr>
<td>freertos_iot_coap_coap_server </td><td>freertos/iot/coap/coap_server </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___i_o_t___c_o_a_p___c_o_a_p___s_e_r_v_e_r.html">embARC LwIP CoAP Server Example</a> </td></tr>
<tr>
<td>freertos_iot_lwm2m_iot_demo </td><td>freertos/iot/lwm2m/iot_demo </td><td>EMBARC_APP_FREERTOS_IOT_LWM2M_IOT_DEMO </td></tr>
<tr>
<td>freertos_iot_lwm2m_lwm2m_client </td><td>freertos/iot/lwm2m/lwm2m_client </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___i_o_t___l_w_m2_m___l_w_m2_m___c_l_i_e_n_t.html">embARC LwIP LwM2M Client Example</a> </td></tr>
<tr>
<td>freertos_iot_lwm2m_lwm2m_server </td><td>freertos/iot/lwm2m/lwm2m_server </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___i_o_t___l_w_m2_m___l_w_m2_m___s_e_r_v_e_r.html">embARC LwIP LwM2M Server Example</a> </td></tr>
<tr>
<td>freertos_kernel </td><td>freertos/kernel </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___k_e_r_n_e_l.html">embARC FreeRTOS Kernel Example</a> </td></tr>
<tr>
<td>freertos_kernel_secure </td><td>freertos/kernel_secure </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___k_e_r_n_e_l___s_e_c_u_r_e.html">embARC FreeRTOS kernel example with secureshield</a> </td></tr>
<tr>
<td>freertos_net_httpserver </td><td>freertos/net/httpserver </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___n_e_t___h_t_t_p_s_e_r_v_e_r.html">embARC LwIP HTTPServer Example</a> </td></tr>
<tr>
<td>freertos_net_ntshell </td><td>freertos/net/ntshell </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___n_e_t___n_t_s_h_e_l_l.html">embARC Net Example on NT-Shell</a> </td></tr>
<tr>
<td>freertos_sec_mbedtls_dtls_client </td><td>freertos/sec/mbedtls/dtls/client </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___s_e_c___m_b_e_d_t_l_s___d_t_l_s___c_l_i_e_n_t.html">embARC DTLS Secure Client using mbed TLS</a> </td></tr>
<tr>
<td>freertos_sec_mbedtls_dtls_server </td><td>freertos/sec/mbedtls/dtls/server </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___s_e_c___m_b_e_d_t_l_s___d_t_l_s___s_e_r_v_e_r.html">embARC DTLS Secure Server using mbed TLS</a> </td></tr>
<tr>
<td>freertos_sec_mbedtls_ssl_client2 </td><td>freertos/sec/mbedtls/ssl/client2 </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___s_e_c___m_b_e_d_t_l_s___s_s_l___c_l_i_e_n_t2.html">embARC SSL Secure Client using mbed TLS</a> </td></tr>
<tr>
<td>freertos_sec_mbedtls_ssl_server2 </td><td>freertos/sec/mbedtls/ssl/server2 </td><td><a class="el" href="group___e_m_b_a_r_c___a_p_p___f_r_e_e_r_t_o_s___s_e_c___m_b_e_d_t_l_s___s_s_l___s_e_r_v_e_r2.html">embARC SSL Secure Server using mbed TLS</a> </td></tr>
</table>
</li>
<li><b>Here is a list of embARC applications</b>, located in <a href="https://github.com/foss-for-synopsys-dwc-arc-processors/embarc_applications">embARC applications</a>. <table class="doxtable">
<tr>
<th>Application Name </th><th>Application Link  </th></tr>
<tr>
<td>aws_iot_smarthome </td><td><a href="https://github.com/foss-for-synopsys-dwc-arc-processors/embarc_applications/tree/master/aws_iot_smarthome">AWS IoT Smarthome Application</a> </td></tr>
<tr>
<td>aws_iot_smarthome_multinode </td><td><a href="https://github.com/foss-for-synopsys-dwc-arc-processors/embarc_applications/tree/master/aws_iot_smarthome_multinode">AWS IoT Smarthome Multi-node Application</a> </td></tr>
<tr>
<td>ibaby_smarthome_multinode </td><td><a href="https://github.com/foss-for-synopsys-dwc-arc-processors/embarc_applications/tree/master/ibaby_smarthome_multinode">iBaby Smarthome Application</a> </td></tr>
<tr>
<td>ilight_smartdevice </td><td><a href="https://github.com/foss-for-synopsys-dwc-arc-processors/embarc_applications/tree/master/ilight_smartdevice">iLight SmartDevice Application</a> </td></tr>
<tr>
<td>ot_smarthome_multinode </td><td><a href="https://github.com/foss-for-synopsys-dwc-arc-processors/embarc_applications/tree/master/ot_smarthome_multinode">OpenThread Smarthome Application</a> </td></tr>
</table>
</li>
</ul>
<h1><a class="anchor" id="sect_example_division_of_provided_embARC_examples"></a>
Division of embARC Examples</h1>
<p>embARC provides bare-metal and FreeRTOS examples. You can click on the following links to go to the appropriate section.</p>
<ul>
<li><a class="el" href="group___e_m_b_a_r_c___a_p_p_s___b_a_r_e_m_e_t_a_l.html">Baremetal Examples</a></li>
<li><a class="el" href="group___e_m_b_a_r_c___a_p_p_s___o_s___f_r_e_e_r_t_o_s.html">FreeRTOS Examples</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 9 2018 09:27:08 for embARC by
    <a href="http://www.synopsys.com">
    <img class="footer" src="pic/snps_logo.png" alt="snps_logo"/></a>. All Rights Reserved. </li>
  </ul>
</div>
</body>
</html>
